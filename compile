. common

MAINCLASSDIR=build/classes/scala/main
TESTCLASSDIR=build/classes/scala/test
COMPILER_OPTS="-Xlint:_ -feature -deprecation -Ywarn-unused:_ -Ywarn-dead-code -Ywarn-value-discard"

# Main sources

MAIN_SOURCES=$(find src/main/ -type f -name '*.scala')

# Test sources

EXCLUDE_PATTERN_IN_TEST='*TestInput.scala'
TEST_SOURCES=$(find src/test/ -type f -name '*.scala' | grep -Ev $EXCLUDE_PATTERN_IN_TEST)

# Compilation

mkdir -p "$MAINCLASSDIR" "$TESTCLASSDIR"

scalac -classpath $classpath -d "$MAINCLASSDIR" $COMPILER_OPTS "$@" $MAIN_SOURCES $TEST_SOURCES
